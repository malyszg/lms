{% extends 'base.html.twig' %}

{% block title %}Zmiana hasła - LMS{% endblock %}

{% block page_title %}Zmiana hasła{% endblock %}

{% block body %}
<div style="max-width: 800px; margin: 0 auto;">
    <div class="fluent-card">
        {% if app.flashes('success')|length > 0 %}
            {% for message in app.flashes('success') %}
                <div class="fluent-message-bar" appearance="success" style="margin-bottom: var(--fluent-spacing-l);">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 8px;">
                        <path d="M8 1c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7zm3.5 5L7 10.5 4.5 8 3 9.5l4 4 6-6-1.5-1.5z"/>
                    </svg>
                    <span>{{ message }}</span>
                </div>
            {% endfor %}
        {% endif %}
        
        {% if error %}
            <div class="fluent-message-bar" appearance="error" style="margin-bottom: var(--fluent-spacing-l);">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 8px;">
                    <path d="M8 1c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7zm1 10V9H7v2h2zm0-3V5H7v3h2z"/>
                </svg>
                <span>{{ error }}</span>
            </div>
        {% endif %}
        
        <form method="post" action="{{ path('profile_change_password') }}">
            <div class="fluent-form-group">
                <label for="current_password" class="fluent-label">Obecne hasło</label>
                <input type="password" 
                       class="fluent-input" 
                       id="current_password" 
                       name="current_password" 
                       required 
                       autofocus>
            </div>
            
            <div class="fluent-form-group">
                <label for="new_password" class="fluent-label">Nowe hasło</label>
                <input type="password" 
                       class="fluent-input" 
                       id="new_password" 
                       name="new_password" 
                       minlength="8"
                       required>
                <small class="fluent-hint" style="display: block; margin-top: var(--fluent-spacing-xs); color: var(--fluent-neutral-foreground-3);">
                    Minimum 8 znaków
                </small>
            </div>
            
            <div class="fluent-form-group">
                <label for="new_password_confirm" class="fluent-label">Potwierdź nowe hasło</label>
                <input type="password" 
                       class="fluent-input" 
                       id="new_password_confirm" 
                       name="new_password_confirm" 
                       minlength="8"
                       required>
            </div>
            
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('change_password') }}">
            
            <div style="display: flex; gap: var(--fluent-spacing-m); margin-top: var(--fluent-spacing-xl);">
                <fluent-button type="submit" appearance="accent">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 8px;">
                        <path d="M8 1c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7zm3.5 5L7 10.5 4.5 8 3 9.5l4 4 6-6-1.5-1.5z"/>
                    </svg>
                    Zmień hasło
                </fluent-button>
                <fluent-button type="button" appearance="neutral" onclick="history.back()">
                    Anuluj
                </fluent-button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
