{% extends 'base.html.twig' %}

{% block title %}Logowanie - LMS{% endblock %}

{% block unauthenticated_body %}
<div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: linear-gradient(135deg, var(--fluent-accent-primary) 0%, #5a67d8 100%);">
    <div class="fluent-card" style="width: 420px; box-shadow: var(--fluent-shadow-28);">
        <div style="text-align: center; margin-bottom: var(--fluent-spacing-xxl);">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="var(--fluent-accent-primary)" style="margin-bottom: var(--fluent-spacing-m);">
                <path d="M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"/>
            </svg>
            <h1 style="font-size: var(--fluent-font-size-700); font-weight: var(--fluent-font-weight-semibold); margin-bottom: var(--fluent-spacing-xs); color: var(--fluent-neutral-foreground-1);">LMS</h1>
            <p style="color: var(--fluent-neutral-foreground-3); font-size: var(--fluent-font-size-300);">Lead Management System</p>
        </div>

        {% if error %}
            <div class="fluent-message-bar" appearance="error" style="margin-bottom: var(--fluent-spacing-l);">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 8px;">
                    <path d="M8 1c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7zm1 10V9H7v2h2zm0-3V5H7v3h2z"/>
                </svg>
                <span>{{ error.messageKey|trans(error.messageData, 'security') }}</span>
            </div>
        {% endif %}

        {% for message in app.flashes('success') %}
            <div class="fluent-message-bar" appearance="success" style="margin-bottom: var(--fluent-spacing-l);">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 8px;">
                    <path d="M8 1c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7zm3.5 5L7 10.5 4.5 8 3 9.5l4 4 6-6-1.5-1.5z"/>
                </svg>
                <span>{{ message }}</span>
            </div>
        {% endfor %}
        
        <form method="post">
            <div class="fluent-form-group">
                <label for="email" class="fluent-label">Email</label>
                <input type="email" 
                       class="fluent-input" 
                       id="email" 
                       name="_username" 
                       value="{{ last_username }}"
                       placeholder="twoj.email@example.com"
                       required 
                       autofocus>
            </div>
            
            <div class="fluent-form-group">
                <label for="password" class="fluent-label">Hasło</label>
                <input type="password" 
                       class="fluent-input" 
                       id="password" 
                       name="_password" 
                       placeholder="Wprowadź hasło"
                       required>
            </div>

            <div class="fluent-checkbox-group" style="margin-top: var(--fluent-spacing-m);">
                <input type="checkbox" 
                       id="remember_me" 
                       name="_remember_me" 
                       class="fluent-checkbox">
                <label for="remember_me" style="margin-left: var(--fluent-spacing-xs);">Zapamiętaj mnie</label>
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
            
            <fluent-button type="submit" 
                           appearance="accent" 
                           style="width: 100%; justify-content: center; margin-top: var(--fluent-spacing-l);">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 8px;">
                    <path d="M7 2v2H3v8h4v2H1V2h6zm2 3l5 5-5 5v-3H5V8h4V5z"/>
                </svg>
                Zaloguj się
            </fluent-button>
        </form>
        
        <div style="text-align: center; margin-top: var(--fluent-spacing-xxl); padding-top: var(--fluent-spacing-l); border-top: 1px solid var(--fluent-neutral-stroke-1);">
            <small style="color: var(--fluent-neutral-foreground-3); font-size: var(--fluent-font-size-200);">
                © 2025 LMS. Wszystkie prawa zastrzeżone.
            </small>
        </div>
    </div>
</div>
{% endblock %}



