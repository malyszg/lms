<div style="margin-bottom: var(--fluent-spacing-xxl);">
    <div class="fluent-card">
        <form id="filters-form" 
              hx-get="{{ path('leads_list') }}" 
              hx-target="#leads-table-container" 
              hx-push-url="true"
              hx-indicator="#loading-spinner">
            
            {# Basic filters - always visible #}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--fluent-spacing-l); margin-bottom: var(--fluent-spacing-l);">
                <div class="fluent-form-group">
                    <label for="status" class="fluent-label">Status</label>
                    <select name="status" id="status" class="fluent-select">
                        <option value="">Wszystkie</option>
                        <option value="new" {{ filters.status == 'new' ? 'selected' : '' }}>Nowy</option>
                        <option value="contacted" {{ filters.status == 'contacted' ? 'selected' : '' }}>Skontaktowano</option>
                        <option value="qualified" {{ filters.status == 'qualified' ? 'selected' : '' }}>Zakwalifikowano</option>
                        <option value="converted" {{ filters.status == 'converted' ? 'selected' : '' }}>Przekonwertowano</option>
                        <option value="rejected" {{ filters.status == 'rejected' ? 'selected' : '' }}>Odrzucono</option>
                    </select>
                </div>
                
                <div class="fluent-form-group">
                    <label for="application_name" class="fluent-label">Aplikacja źródłowa</label>
                    <select name="application_name" id="application_name" class="fluent-select">
                        <option value="">Wszystkie</option>
                        <option value="morizon" {{ filters.applicationName == 'morizon' ? 'selected' : '' }}>Morizon</option>
                        <option value="gratka" {{ filters.applicationName == 'gratka' ? 'selected' : '' }}>Gratka</option>
                        <option value="homsters" {{ filters.applicationName == 'homsters' ? 'selected' : '' }}>Homsters</option>
                    </select>
                </div>
                
                <div class="fluent-form-group">
                    <label for="created_from" class="fluent-label">Data od</label>
                    <input type="date" 
                           name="created_from" 
                           id="created_from" 
                           class="fluent-input" 
                           value="{{ filters.createdFrom ? filters.createdFrom|date('Y-m-d') : '' }}">
                </div>
                
                <div class="fluent-form-group">
                    <label for="created_to" class="fluent-label">Data do</label>
                    <input type="date" 
                           name="created_to" 
                           id="created_to" 
                           class="fluent-input" 
                           value="{{ filters.createdTo ? filters.createdTo|date('Y-m-d') : '' }}">
                </div>
            </div>
            
            {# Action buttons #}
            <div style="display: flex; gap: var(--fluent-spacing-m); align-items: center; flex-wrap: wrap;">
                <fluent-button type="submit" appearance="accent">
                    <span id="loading-spinner" class="htmx-indicator fluent-spinner" style="margin-right: 8px;"></span>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 4px;">
                        <path d="M14 6.5l-1.5-1.5L10 7.5V0H8v7.5L5.5 5 4 6.5 8 10.5l4-4zM2 12v2h12v-2H2z"/>
                    </svg>
                    Zastosuj filtry
                </fluent-button>
                <fluent-button type="button" 
                        appearance="subtle"
                        onclick="document.getElementById('advanced-filters').classList.toggle('hidden')">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 4px;">
                        <path d="M2 4l4 4 4-4H2z"/>
                    </svg>
                    Więcej filtrów
                </fluent-button>
                <fluent-button type="button" 
                        appearance="subtle"
                        onclick="window.location.href='{{ path('leads_list') }}'">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-right: 4px;">
                        <path d="M8 6.586L5.707 4.293 4.293 5.707 6.586 8l-2.293 2.293 1.414 1.414L8 9.414l2.293 2.293 1.414-1.414L9.414 8l2.293-2.293-1.414-1.414L8 6.586z"/>
                    </svg>
                    Wyczyść filtry
                </fluent-button>
            </div>
            
            {# Advanced filters (collapsible) #}
            <div id="advanced-filters" class="hidden" style="margin-top: var(--fluent-spacing-l);">
                {% include 'leads/_advanced_filters.html.twig' with {'filters': filters} %}
            </div>
        </form>
    </div>
</div>

<style>
.hidden {
    display: none !important;
}
</style>



